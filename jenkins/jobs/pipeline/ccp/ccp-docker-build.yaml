- job-template:
    name: ccp-docker-build
    description: |
      Fuel CCP - CCP image builder container
    project-type: workflow

    timer: ''

    parameters:
      - string:
          name: DOCKER_REGISTRY
          default: '{docker-dev-virtual}'
          description: 'Docker registry for binaries and images'

      - string:
          name: OS_GERRIT_ENDPOINT
          default: 'review.fuel-infra.org:29418'
          description: 'Openstack git endpoint'

      - string:
          name: OS_CREDENTIAL_ID
          default: 'mcp-openstack-reader'
          description: 'Gerrit credential id'

      - string:
          name: OS_BRANCH
          default: '9.0/mitaka'
          description: 'Openstack branch'

    triggers:
      - timed: '{timer}'

    workflow-scm:
      scm:
        basic-scm:
          branch: 'master'
          project: 'ccp/fuel-ccp-docker'
          gerrit-host: '{gerrit-host}'
          gerrit-port: '{gerrit-port}'
      script-path: Jenkinsfile

