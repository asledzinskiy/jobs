- job-template:
    name: '{cluster}-configure-system'
    description: |
      Configure base OS
    project-type: workflow

    parameters:
      - bool:
          name: TEST_MODE
          default: true
      - string:
          name: SLAVE_NODE_LABEL
          default: 'deployment'
          description: 'Specify label to run job on specific slave'
      - string:
          name: CREDENTIALS
          default: deployments-key
          description: 'Ssh credentials for nodes access. Should exist in Jenkins. Used when TEST_MODE is false'
      - string:
          name: CLUSTER_NAME
          default: '{cluster}'
          description: 'Cluster name'
      - string:
          name: GERRIT_HOST
          default: '{gerrit-host}'
          description: 'Gerrit host'
      - string:
          name: NODE_IPS
          default: ''
          description: 'List of Node IPs separated by space. 3 IPs must be set'
    dsl:
      !include-raw-escape: base-os.groovy
