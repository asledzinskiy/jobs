- job-template:
    name: calico-build-calico
    description: |
      Build artifacts<br>
      This is simple job without storing artifacts, only for first stage of
      jobs implementation
    node: calico
    concurrent: true
    builders:
      - trigger-builds:
        - project: calico-build-calico-containers
          predefined-parameters: |
            CALICO_GERRIT_REFSPEC=$GERRIT_REFSPEC
            CALICO_GERRIT_BRANCH=$GERRIT_BRANCH
            CALICO_REPO=file:///tmp/calico_share
            GERRIT_REFSPEC=refs/heads/mcp-0.1
            GERRIT_CHANGE_NUMBER=$GERRIT_CHANGE_NUMBER
          block: true
    triggers:
      - gerrit:
          trigger-on:
            - patchset-created-event
            - comment-added-contains-event:
                comment-contains-value: '(recheck|reverify)'
          projects:
            - project-compare-type: PLAIN
              project-pattern: projectcalico/calico
              branches:
                - branch-compare-type: ANT
                  branch-pattern: '**'
          custom-url: '* $JOB_NAME $BUILD_URL'
