- project:
    name: tools
    jobs:
      - k8s-repo-cloner
      - k8s-repo-cloner-runner
      - gerrit-projects.update
      - gerrit-projects.test
      - jenkins-jobs.update
      - jenkins-jobs.test
      - prepare-slave-nodes

- project:
    name: mcp
    jobs:
      - mcp-build-run-tests
      - mcp-cluster-create
      - mcp-k8s-e2e-conformance
      - mcp-k8s-hyperkube
      - mcp-k8s-hyperkube-ci
      - mcp-k8s-hyperkube-test-all
      - mcp-k8s-images
      - mcp-k8s-test-integration
      - mcp-k8s-test-unit-with-coverage
      - mcp-k8s-test-unit
      - mcp-k8s-conformance-test-runner
      - mcp-k8s-conformance-test-runner-ci
      - mcp-lint-test
      - mcp-prepare-env
      - mcp-k8s-merge-pipeline
      - mcp-k8s-test-pipeline

- project:
    name: calico-build-calico
    jobs:
      - calico-build-calico
      - calico-build-calico-gate

- project:
    name: calico-build-calico-bird
    jobs:
      - calico-build-calico-bird
      - calico-build-calico-bird-gate

- project:
    name: calico-build-confd
    jobs:
      - calico-build-confd
      - calico-build-confd-gate

- project:
    name: calico-build-calico-containers
    jobs:
      - calico-build-calico-containers
      - calico-build-calico-containers-gate

- project:
    name: calico-build-calico-cni
    jobs:
      - calico-build-calico-cni
      - calico-build-calico-cni-gate

- project:
    name: calico-build-libcalico
    jobs:
      - calico-build-libcalico
      - calico-build-libcalico-gate

- project:
    name: calico-pep8
    jobs:
      - calico-pep8-{project-name}
    project-name:
      - calico

- project:
    name: calico-unit-tests
    jobs:
      - calico-unit-test
      - calico-containers-unit-test
      - libcalico-unit-test
      - calico-confd-unit-test
      - calico-cni-unit-test

- project:
    name: mcp-netchecker-unit-tests
    jobs:
    - '{project-name}-tox-{testenv}':
        project-name: mcp-netchecker-agent
        project-space: mcp-netchecker
        testenv:
          - pep8
          - shellcheck
    - '{project-name}-tox-{testenv}':
        project-name: mcp-netchecker-server
        project-space: mcp-netchecker
        testenv:
          - py27
          - py34
          - py35
          - pep8

- project:
    name: mcp-netchecker-build
    jobs:
    - 'mcp-netchecker-{type}-build':
        type:
          - server
          - agent

- project:
    name: mcp-netchecker-gate
    jobs:
    - 'mcp-netchecker-{type}-gate':
        type:
          - server
          - agent

- project:
    name: mcp-netchecker-test-all
    # TODO(apanchenko): take the latest image from artifactory
    image_link: 'http://share01-scc.ng.mirantis.net/images.lst'
    image_path: '/home/jenkins/images/ubuntu-1604-server.qcow2'
    jobs:
    - 'mcp-netchecker-{type}-test-all':
        type:
          - server
          - agent
    - '{project-name}.system-test.{test-name}':
        project-name: 'mcp-netchecker-agent'
        project-space: 'mcp-netchecker'
        test-name: 'deploy'
        project-to-clone: mcp-netchecker-server
    - '{project-name}.system-test.{test-name}':
        project-name: 'mcp-netchecker-server'
        project-space: 'mcp-netchecker'
        test-name: 'deploy'
        project-to-clone: mcp-netchecker-agent

- project:
    name: calico-test-all
    # TODO(apanchenko): take the latest image from artifactory
    image_link: 'http://share01-scc.ng.mirantis.net/images.lst'
    image_path: '/home/jenkins/images/ubuntu-1604-server.qcow2'
    jobs:
    - 'calico.system-test.{test-name}':
        test-name: 'deploy'

- project:
    name: pipeline-calico
    jobs:
      - pipeline-calico-bird
      - pipeline-calico-cni
      - pipeline-calico-confd
      - pipeline-calico-containers
      - pipeline-calico-felix
      - pipeline-calico-libcalico
      - pipeline-calico-libcalico-go

- project:
    name: pipeline-calico-gate
    jobs:
      - pipeline-calico-bird-gate
      - pipeline-calico-cni-gate
      - pipeline-calico-confd-gate
      - pipeline-calico-containers-gate
      - pipeline-calico-felix-gate
      - pipeline-calico-libcalico-gate
      - pipeline-calico-libcalico-go-gate

- project:
    name: sync-upstream-repos
    jobs:
       - 'sync-upstream'
